<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Full Stack JavaScript</title>
    <link rel="stylesheet" type="text/css" href="build/build.css">
  </head>
  <body>
    <article>
      <section>
        <h1>Full Stack JavaScript</h1>
      </section>
      <section>
        <h2>Kevin Isom </h2>
        <h3 class="bullet">Who is this guy?</h3>
        <ul>
          <li>Lead Web Engineer at InSpark Technology</li>
          <li>Co-Organiser for Auckland Node.js</li>
          <li>Co-Organiser for Auckland JavaScript</li>
          <li>General committee member for the JavaScript Society of New Zealand</li>
          <li>I really like JavaScript</li>
        </ul>
      </section>
      <section data-bespoke-backdrop="emphatic" class="emphatic-text"><img src="images/warning.gif"></section>
      <section>
        <h2>New Project</h2>
      </section>
      <section><img src="images/bugs-heart.gif"></section>
      <section>
        <h2>What do I use?</h2>
      </section>
      <section>
        <h3>.Net ?</h3>
      </section>
      <section><img src="images/minions-lol.gif"></section>
      <section>
        <h3>Seriously</h3>
        <h2>.Net is a wasteland</h2>
      </section>
      <section>
        <h3>Something on the JVM?</h3>
      </section>
      <section><img src="images/disgusting.gif"></section>
      <section>
        <h3>PHP?</h3>
      </section>
      <section><img src="images/maybe.gif"></section>
      <section>
        <h3>Node JS?</h3>
      </section>
      <section><img src="images/shocked-not-shocked.gif"></section>
      <section>
        <h3>Why?</h3>
        <ul>
          <li>Easier context switching</li>
          <li>Dynamic Language, no left had right hand code</li>
          <li>I know JavaScript</li>
          <li>Lot's of other Developers know JavaScript</li>
        </ul>
      </section>
      <section>
        <h2>Decisions</h2>
      </section>
      <section><img src="images/sad-snoopy.gif"></section>
      <section>
        <h2>Seriously, making a decision is not a bad thing</h2>
      </section>
      <section>
        <h2 class="bullet"> Web Frameworks</h2>
        <ul>
          <li>Express</li>
          <li>Hapi.js</li>
          <li>Restify</li>
          <li>Numerous Frameworks built on Express</li>
        </ul>
      </section>
      <section>
        <h2>DataBase?</h2>
      </section>
      <section>
        <h2>Data Access Code</h2>
      </section>
      <section>
        <h3 class="bullet"> Knex.js for</h3>
        <ul>
          <li>Database migrations</li>
          <li>Data seeding</li>
          <li>Direct querying</li>
        </ul>
      </section>
      <section>
        <pre><code class="language-javascript">exports.up = function(knex, Promise) {
  return knex.schema
    .createTable('users', (t) => {
      t.increments('id').primary();
      t.string('email').notNullable();
      t.string('firstName').notNullable();
      t.string('lastName').notNullable();
      t.string('password').notNullable();
      t.timestamps(true);
    }).then(() => {
      console.log('users table created');
    });
};
exports.down = function(knex, Promise) {
  return knex.schema.dropTable('users');
};
</code></pre>
      </section>
      <section>
        <pre><code class="language-javascript">const bcrypt = require('bcrypt');
const generatUser = function genUser(email, password, first, last, role) {
  const salt = bcrypt.genSaltSync(10);
  const hash = bcrypt.hashSync(password, salt);
  const user = {
    firstName: first,
    lastName: last,
    password: hash,
    email: email,
    created_at: new Date(),
    updated_at: new Date()
  };
  return user;
};

const kev = generatUser('kevin.isom@gmail.com', 'password', 'Kevin', 'Isom');

exports.seed = function userSeed(knex, Promise) {
  return knex('users').insert(kev);
};</code></pre>
      </section>
      <section>
        <pre><code class="language-javascript">knex('users').where('email', 'kevin.isom@gmail.com');</code></pre>
      </section>
      <section>
        <h2>ORM - Bookshelf.js</h2>
      </section>
      <section>
        <pre><code class="language-javascript">module.exports = bookshelf.model('User', {
  tableName: 'users',
  idAttribute: 'id'
}, {
  login: function (email, password) {
    console.log('login', email);
    return new this({ email: email.toLowerCase().trim() })
    .fetch({ require: true })
    .tap(function(user) {
      if (bcrypt.compareSync(user.get('password'), password)) {
        return false;
      }
      return user;
    });
  }
});</code></pre>
      </section>
      <section>
        <h2>Server rendering with ease</h2>
      </section>
      <section>
        <h2>How Easy?</h2>
      </section>
      <section>
        <pre><code class="language-javascript">ReactDOMServer.renderToString(App(props));</code></pre>
      </section>
      <section>
        <h2 class="bullet">That easy</h2>
        <p>But if you need more <a href="https://www.npmjs.com/package/iso">iso</a></p>
      </section>
      <section>
        <h2>Great, now I have to do something with it</h2>
        <h3>Deploying your app</h3>
      </section>
      <section>
        <h3><a href="https://github.com/shipitjs">Shipit JS</a></h3>
        <p>Universal automation and deployment tool written in JavaScript.</p>
      </section>
      <section>
        <h3 class="bullet">Covers</h3>
        <ul>
          <li>retrieving from source control</li>
          <li>ssh</li>
          <li>npm tasks</li>
          <li>general command line task</li>
        </ul>
      </section>
      <section>
        <pre><code class="language-javascript">module.exports = function (shipit) {
  require('shipit-deploy')(shipit);
  shipit.initConfig({
    default: {
      workspace: '/tmp/github-monitor',
      deployTo: '/tmp/deploy_to',
      repositoryUrl: 'https://github.com/user/repo.git',
      ignores: ['.git', 'node_modules'],
      rsync: ['--del'],
      keepReleases: 2,
      key: '/path/to/key',
      shallowClone: true
    },
    staging: {
      servers: 'user@myserver.com'
    }
  });
};</code></pre>
      </section>
      <section>
        <h2>Great, it's on the server now what?</h2>
        <h3>The care and feeding of a node server</h3>
      </section>
      <section>
        <h2><a href="http://pm2.keymetrics.io/">PM2</a></h2>
        <p>Advanced, production process manager for Node.js</p>
      </section>
      <section>
        <h4>config</h4>
        <pre><code class="language-javascript">{
  "name"        : "my-awesome-app",
  "script"      : "bin/www",
  "args"        : [],
  "watch"       : true,
  "node_args"   : ["--production"],
  "merge_logs"  : true,
  "cwd"         : "~/myapp/web/current",
  "env": {
     "NODE_ENV": "production",
     "env":"production",
     "PORT": "7353"
  }
}</code></pre>
      </section>
      <section>
        <h2>Beyond the Web App</h2>
      </section>
      <section>
        <h2>Automated Selenium testing with Nightwatch</h2>
      </section>
      <section>
        <pre><code class="language-javascript">module.exports = {
  "Demo test Google" : function (client) {
  client
    .url("http://www.google.com")
    .waitForElementVisible("body", 1000)
    .assert.title("Google")
    .assert.visible("input[type=text]")
    .setValue("input[type=text]", "rembrandt van rijn")
    .waitForElementVisible("button[name=btnG]", 1000)
    .click("button[name=btnG]")
    .pause(1000)
    .assert.containsText("ol#rso li:first-child", "Rembrandt - Wikipedia")
    .end();
  }
};</code></pre>
      </section>
      <section>
        <h2>Mobile API with Parse Server</h2>
      </section>
      <section>
        <h2>Mobile App with React-Native</h2>
      </section>
      <section>
        <h2>Thanks</h2>
        <ul>
          <li><a href="https://www.twitter.com/kev_nz">kev_nz on Twitter</a></li>
          <li><a href="https://www.github.com/kevnz">kevnz on Github</a></li>
        </ul>
      </section>
    </article>
    <script src="build/build.js"></script>
  </body>
</html>